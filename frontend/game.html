<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>十三水游戏大厅</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <nav class="navbar">
    <span>欢迎, <span id="nickname"></span></span>
    <button onclick="logout()">退出登录</button>
  </nav>
  <div class="game-container">
    <h2>十三水房间</h2>
    <button onclick="createRoom()">创建房间</button>
    <div id="room-msg"></div>
    <!-- 房间列表和操作区 -->
    <div id="room-list"></div>
    <!-- ...根据需要扩展 -->
  </div>
  <script>
    document.getElementById('nickname').innerText = localStorage.getItem('nickname') || '';
    function logout(){ localStorage.clear(); location.href='login.html'; }
    async function createRoom() {
      const token = localStorage.getItem('token');
      if(!token) return location.href='login.html';
      // 这里可以弹窗输入房主昵称或直接用已登录昵称
      const res = await fetch('/api/create_room.php', {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body:JSON.stringify({name: localStorage.getItem('nickname')})
      });
      const data = await res.json();
      if(data.success){
        document.getElementById('room-msg').innerText = '房间创建成功，房间号：'+data.roomId;
        // 可以载入房间详情页
      } else {
        document.getElementById('room-msg').innerText = data.message;
      }
    }
  </script>
</body>
</html>
